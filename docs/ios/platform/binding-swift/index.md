---
title: "Binding iOS Swift Libraries"
description: "This document describes how to create C# bindings to Swift code, making it possible to consume native libraries and CocoaPods in a Xamarin.iOS application."
ms.prod: xamarin
ms.assetid: 890EFCCA-A2A2-4561-88EA-30DE3041F61D
ms.technology: xamarin-ios
author: alexeystrakh
ms.author: alstrakh
ms.date: 02/11/2020
---

# Binding iOS Swift Libraries

The iOS platform, along with its native languages and tooling, is constantly evolving and there are plenty of 3rd party libraries that have been developed using the latest offerings. Maximizing code and component reuse is one of the key goals of cross-platform development. The ability to reuse components built with Swift has become increasingly important to Xamarin developers as their popularity amongst developers continues to grow. You may already be familiar with the process of binding regular [Objective-C](https://docs.microsoft.com/en-us/xamarin/ios/platform/binding-objective-c/walkthrough) libraries. Additional documentation is now available describing the process of [Binding a Swift Framework](walkthrough.md), so they are consumable by a Xamarin application in the same manner. The purpose of this document is to describe a high-level approach to create a Swift Binding for Xamarin.

## The High-level Approach

With Xamarin you can bind any 3d party native library to be consumable by a Xamarin application. Swift is the new language and creating binding for libraries built with this language requires some additional steps and tooling. This involves the following four steps:

1. Building the native library
1. Preparing the Xamarin metadata which enables Xamarin tooling to generate C# classes
1. Building a Xamarin Binding Library using the native library and the metadata
1. Consuming the Xamarin Binding Library in a Xamarin application

The following guide outlines these steps with additional details.

## Binding a Swift Framework

1. **Building the native library**

    The first step is to have a native Swift Framework ready with Objective-C header created. This file is an autogenerated header which exposes desired Swift classes, methods, and fields making them accessible to both Objective-C and ultimately C# via a Xamarin Binding Library. This file is located within the framework under the following path: `<FrameworkName>.framework/Headers/<FrameworkName>-Swift.h`. If the exposed interface has all the required members you can skip to the next step. Otherwise, further steps are required to expose those members. The approach will depend on whether you have access to the Swift framework source code:

    - If you have access to the code, you can decorate the required Swift member(s) with the `@objc` attribute and apply a few additional rules to let the Xcode build tools know that these members should be exposed to the Objective-C world and the header.

    - If you don't have the source code access, you need to create a proxy Swift framework, which wraps the original Swift framework and defines the public interface required by your application using the `@objc` attribute.

1. **Preparing the Xamarin metadata**

    The second step is to prepare API definition interfaces which are used by a binding project to generate C# classes. These definitions could be created manually or automatically by the [Objective Sharpie](https://docs.microsoft.com/en-us/xamarin/cross-platform/macios/binding/objective-sharpie/) tool and the aforementioned auto-generated `<FrameworkName>-Swift.h` header file. Once the metadata is generated, it should be verified and validated manually.

1. **Building the Xamarin.iOS Binding Library**

    The third step is to create a special kind of project - Xamarin.iOS Binding Library. It references the frameworks and the metadata prepared at the previous step along with any additional dependencies the respective framework is reliant upon. It also handles the linking of the referenced native frameworks with the consuming Xamarin.iOS application.

1. **Consuming the Xamarin Binding Library**

    The forth and the final step is to reference the binding library in a Xamarin.iOS application. It is sufficient to enable the use of the native library within Xamarin.iOS applications targeting iOS 12.2 and above. For those applications targeting a lower version, some additional steps are required:

    - Add Swift dylib dependencies for runtime support. Starting from iOS 12.2 and Swift 5.1, the language became ABI (application binary interface) stable and compatible. Thus any application targeting a lower iOS versions needs to include Swift dylibs dependencies used by the framework. Use the [SwiftRuntimeSupport Nuget package](https://www.nuget.org/packages/Xamarin.iOS.SwiftRuntimeSupport/) to automatically include required dylib dependencies into the resulting application package.

    - Add `SwiftSupport` folder with signed dylibs, which is validated by the AppStore during uploading process. Using Xcode tools the package has to be signed and distributed to the AppStore connect, otherwise the package will be automatically rejected.

## The Walkthrough

The approach above outlines the high-level steps required to create a Swift Binding for Xamarin. There are many lower-level steps involved and further details to consider when preparing these bindings in practice including adapting to changes in the native tools and languages. The intent is to help you to gain a deeper understanding of this concept and the high-level steps involved in this process. For a detailed step-by-step guide please refer to the  [Xamarin Swift Binding](walkthrough.md) documentation.

## Related Links

- [Xcode](https://apps.apple.com/us/app/xcode/id497799835)
- [Visual Studio for Mac](https://visualstudio.microsoft.com/downloads)
- [Objective Sharpie](https://docs.microsoft.com/en-us/xamarin/cross-platform/macios/binding/objective-sharpie/)
- [Sharpie Metadata Verification](https://docs.microsoft.com/en-us/xamarin/cross-platform/macios/binding/objective-sharpie/platform/verify)
- [Binding Objective-C Framework](https://docs.microsoft.com/en-us/xamarin/ios/platform/binding-objective-c/walkthrough)
- [Gigya iOS SDK (Swift framework)](https://developers.gigya.com/display/GD/Swift+SDK)
- [Swift 5.1 ABI Stability](https://swift.org/blog/swift-5-1-released/)
- [SwiftRuntimeSupport nuget](https://www.nuget.org/packages/Xamarin.iOS.SwiftRuntimeSupport/)
- [Xamarin UITest automation](https://docs.microsoft.com/en-us/appcenter/test-cloud/uitest/)
- [Xamarin.iOS UITest configuration](https://docs.microsoft.com/en-us/appcenter/test-cloud/preparing-for-upload/xamarin-ios-uitest)
- [AppCenter Test Cloud](https://docs.microsoft.com/en-us/appcenter/test-cloud/preparing-for-upload/xamarin-ios-uitest)
- [Sample project repository](https://github.com/xamcat/xamarin-binding-swift-framework)
